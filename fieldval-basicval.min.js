var logger;"function"==typeof require&&(logger=require("tracer").console());var _validator_ref;_validator_ref="function"==typeof require?require("fieldval"):FieldVal;var BasicVal={errors:{too_short:function(r){return{error:100,error_message:"Length is less than "+r}},too_long:function(r){return{error:101,error_message:"Length is greater than "+r}},too_small:function(r){return{error:102,error_message:"Value is less than "+r}},too_large:function(r){return{error:103,error_message:"Value is greater than "+r}},not_in_list:function(){return{error:104,error_message:"Value is not a valid choice"}},cannot_be_empty:function(){return{error:105,error_message:"Value cannot be empty."}},no_prefix:function(r){return{error:106,error_message:"Value does not have prefix: "+r}},invalid_email:function(){return{error:107,error_message:"Invalid email address format."}},invalid_url:function(){return{error:108,error_message:"Invalid url format."}},incorrect_length:function(r){return{error:109,error_message:"Length is not equal to "+r}},no_suffix:function(r){return{error:106,error_message:"Value does not have suffix: "+r}}},merge_required_and_flags:function(r,e){return"object"==typeof r?e=r:(e||(e={}),e.required=r),e},integer:function(r,e){return _validator_ref.type("integer",BasicVal.merge_required_and_flags(r,e))},number:function(r,e){return _validator_ref.type("number",BasicVal.merge_required_and_flags(r,e))},array:function(r,e){return _validator_ref.type("array",BasicVal.merge_required_and_flags(r,e))},object:function(r,e){return _validator_ref.type("object",BasicVal.merge_required_and_flags(r,e))},"float":function(r,e){return _validator_ref.type("float",BasicVal.merge_required_and_flags(r,e))},"boolean":function(r,e){return _validator_ref.type("boolean",BasicVal.merge_required_and_flags(r,e))},string:function(r,e){e=BasicVal.merge_required_and_flags(r,e);var n=function(n,a){var t=_validator_ref.type("string",e);"object"==typeof t&&(t=t.check);var o=t(n,a);return o?o:(e&&e.trim===!1||(n=n.trim()),0===n.length?r||void 0===r?_validator_ref.REQUIRED_ERROR:_validator_ref.NOT_REQUIRED_BUT_MISSING:void 0)};return e?(e.check=n,e):n},length:function(r,e){var n=function(n){return n.length!==r?FieldVal.create_error(BasicVal.errors.incorrect_length,e,r):void 0};return e?(e.check=n,e):n},min_length:function(r,e){var n=function(n){return n.length<r?FieldVal.create_error(BasicVal.errors.too_short,e,r):void 0};return e?(e.check=n,e):n},max_length:function(r,e){var n=function(n){return n.length>r?FieldVal.create_error(BasicVal.errors.too_long,e,r):void 0};return e?(e.check=n,e):n},minimum:function(r,e){var n=function(n){return r>n?FieldVal.create_error(BasicVal.errors.too_small,e,r):void 0};return e?(e.check=n,e):n},maximum:function(r,e){var n=function(n){return n>r?FieldVal.create_error(BasicVal.errors.too_large,e,r):void 0};return e?(e.check=n,e):n},range:function(r,e,n){var a=function(a){return r>a?FieldVal.create_error(BasicVal.errors.too_small,n,r):a>e?FieldVal.create_error(BasicVal.errors.too_large,n,e):void 0};return n?(n.check=a,n):a},one_of:function(r,e){var n=[];if("[object Array]"===Object.prototype.toString.call(r))for(var a=0;a<r.length;a++){var t=r[a];n.push("object"==typeof t?t[0]:t)}else for(var a in r)n.push(a);var o=function(r){return-1===n.indexOf(r)?FieldVal.create_error(BasicVal.errors.not_in_list,e):void 0};return e?(e.check=o,e):o},not_empty:function(r,e){var n=function(n){if(r){if(0===n.trim().length)return FieldVal.create_error(BasicVal.errors.cannot_be_empty,e)}else if(0===n.length)return FieldVal.create_error(BasicVal.errors.cannot_be_empty,e)};return e?(e.check=n,e):n},prefix:function(r,e){var n=function(n){return n.length>=r.length?n.substring(0,r.length)!=r?FieldVal.create_error(BasicVal.errors.no_prefix,e,r):void 0:FieldVal.create_error(BasicVal.errors.no_prefix,e,r)};return e?(e.check=n,e):n},suffix:function(r,e){var n=function(n){return n.length>=r.length?n.substring(n.length-r.length,n.length)!=r?FieldVal.create_error(BasicVal.errors.no_suffix,e,r):void 0:FieldVal.create_error(BasicVal.errors.no_suffix,e,r)};return e?(e.check=n,e):n},each:function(r,e){var n=function(e){for(var n=new _validator_ref(null),a=0;a<e.length;a++){var t=e[a],o=r(t,a);null!=o&&n.invalid(""+a,o)}var i=n.end();return null!=i?i:void 0};return e?(e.check=n,e):n},email:function(r){var e=function(e){var n=BasicVal.email_regex;return n.test(e)?void 0:FieldVal.create_error(BasicVal.errors.invalid_email,r)};return r?(r.check=e,r):e},url:function(r){var e=function(e){var n=BasicVal.url_regex;return n.test(e)?void 0:FieldVal.create_error(BasicVal.errors.invalid_url,r)};return r?(r.check=e,r):e}};BasicVal.email_regex=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,BasicVal.url_regex=/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,"undefined"!=typeof module&&(module.exports=BasicVal);