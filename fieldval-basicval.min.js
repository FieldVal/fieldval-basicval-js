var BasicVal=function(){var r;"function"==typeof require&&(r=require("tracer").console()),"function"==typeof require&&(FieldVal=require("fieldval")),Array.prototype.indexOf||(Array.prototype.indexOf=function(r,e){var t;if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),o=n.length>>>0;if(0===o)return-1;var i=+e||0;if(1/0===Math.abs(i)&&(i=0),i>=o)return-1;for(t=Math.max(i>=0?i:o-Math.abs(i),0);o>t;){if(t in n&&n[t]===r)return t;t++}return-1});var e={errors:{too_short:function(r){return{error:100,error_message:"Length is less than "+r}},too_long:function(r){return{error:101,error_message:"Length is greater than "+r}},too_small:function(r){return{error:102,error_message:"Value is less than "+r}},too_large:function(r){return{error:103,error_message:"Value is greater than "+r}},not_in_list:function(){return{error:104,error_message:"Value is not a valid choice"}},cannot_be_empty:function(){return{error:105,error_message:"Value cannot be empty."}},no_prefix:function(r){return{error:106,error_message:"Value does not have prefix: "+r}},invalid_email:function(){return{error:107,error_message:"Invalid email address format."}},invalid_url:function(){return{error:108,error_message:"Invalid url format."}},incorrect_length:function(r){return{error:109,error_message:"Length is not equal to "+r}},no_suffix:function(r){return{error:110,error_message:"Value does not have suffix: "+r}},not_equal:function(r){return{error:113,error_message:"Not equal to "+r+"."}},no_valid_option:function(){return{error:115,error_message:"None of the options were valid."}},contains_whitespace:function(){return{error:116,error_message:"Contains whitespace."}},must_start_with_letter:function(){return{error:117,error_message:"Must start with a letter."}},value_in_list:function(){return{error:104,error_message:"Value not allowed"}}},equal_to:function(r,t){var n=function(n){return n!==r?FieldVal.create_error(e.errors.not_equal,t,r):void 0};return t?(t.check=n,t):{check:n}},merge_required_and_flags:function(r,e){return"object"==typeof r?e=r:(e||(e={}),e.required=r),e},integer:function(r,t){return FieldVal.type("integer",e.merge_required_and_flags(r,t))},number:function(r,t){return FieldVal.type("number",e.merge_required_and_flags(r,t))},array:function(r,t){return FieldVal.type("array",e.merge_required_and_flags(r,t))},object:function(r,t){return FieldVal.type("object",e.merge_required_and_flags(r,t))},"float":function(r,t){return FieldVal.type("float",e.merge_required_and_flags(r,t))},"boolean":function(r,t){return FieldVal.type("boolean",e.merge_required_and_flags(r,t))},string:function(r,t){t=e.merge_required_and_flags(r,t);var n=function(e,n){var o=FieldVal.type("string",t);"object"==typeof o&&(o=o.check);var i=o(e,n);return i?i:(t&&t.trim===!1||(e=e.trim()),0===e.length?r||void 0===r?FieldVal.REQUIRED_ERROR:FieldVal.NOT_REQUIRED_BUT_MISSING:void 0)};return t?(t.check=n,t):{check:n}},length:function(r,t){var n=function(n){return n.length!==r?FieldVal.create_error(e.errors.incorrect_length,t,r):void 0};return t?(t.check=n,t):{check:n}},min_length:function(r,t){var n=function(n){return n.length<r?FieldVal.create_error(e.errors.too_short,t,r):void 0};return t?(t.check=n,t):{check:n}},max_length:function(r,t){var n=function(n){return n.length>r?FieldVal.create_error(e.errors.too_long,t,r):void 0};return t?(t.check=n,t):{check:n}},no_whitespace:function(r){var t=function(t){return/\s/.test(t)?FieldVal.create_error(e.errors.contains_whitespace,r,max_len):void 0};return r?(r.check=t,r):{check:t}},minimum:function(r,t){var n=function(n){return r>n?FieldVal.create_error(e.errors.too_small,t,r):void 0};return t?(t.check=n,t):{check:n}},maximum:function(r,t){var n=function(n){return n>r?FieldVal.create_error(e.errors.too_large,t,r):void 0};return t?(t.check=n,t):{check:n}},range:function(r,t,n){var o=function(o){return r>o?FieldVal.create_error(e.errors.too_small,n,r):o>t?FieldVal.create_error(e.errors.too_large,n,t):void 0};return n?(n.check=o,n):{check:o}},one_of:function(r,t){var n=[];if("[object Array]"===Object.prototype.toString.call(r))for(var o=0;o<r.length;o++){var i=r[o];n.push("object"==typeof i?i[0]:i)}else for(var a in r)n.push(a);var l=function(r){return-1===n.indexOf(r)?FieldVal.create_error(e.errors.not_in_list,t):void 0};return t?(t.check=l,t):{check:l}},not_one_of:function(r,t){var n=[];if("[object Array]"===Object.prototype.toString.call(r))for(var o=0;o<r.length;o++){var i=r[o];n.push("object"==typeof i?i[0]:i)}else for(var a in r)n.push(a);var l=function(r){return-1!==n.indexOf(r)?FieldVal.create_error(e.errors.value_in_list,t):void 0};return t?(t.check=l,t):{check:l}},not_empty:function(r,t){var n=function(n){if(r){if(0===n.trim().length)return FieldVal.create_error(e.errors.cannot_be_empty,t)}else if(0===n.length)return FieldVal.create_error(e.errors.cannot_be_empty,t)};return t?(t.check=n,t):{check:n}},prefix:function(r,t){var n=function(n){return n.length>=r.length?n.substring(0,r.length)!=r?FieldVal.create_error(e.errors.no_prefix,t,r):void 0:FieldVal.create_error(e.errors.no_prefix,t,r)};return t?(t.check=n,t):{check:n}},start_with_letter:function(r){var t=function(t){if(!(t.length>0))return FieldVal.create_error(e.errors.must_start_with_letter,r);var n=t.charCodeAt(0);return n>=65&&90>=n||n>=97&&122>=n?void 0:FieldVal.create_error(e.errors.must_start_with_letter,r)};return r?(r.check=t,r):{check:t}},suffix:function(r,t){var n=function(n){return n.length>=r.length?n.substring(n.length-r.length,n.length)!=r?FieldVal.create_error(e.errors.no_suffix,t,r):void 0:FieldVal.create_error(e.errors.no_suffix,t,r)};return t?(t.check=n,t):{check:n}},each:function(r,e){var t=function(e,t,n){for(var o=0,i=new FieldVal(null),o=0;o<e.length;o++){var a=e[o],l=r(a,o,t,n);void 0!==l&&i.invalid(""+o,l)}var c=i.end();return void 0!==c?c:void 0};return e?(e.check=t,e):{check:t}},multiple:function(t,n){if(t=t||[],0===t.length)return void console.error("BasicVal.multiple called without possibles.");var o,i=function(i,a,l){var c,u=function(r){c=r},s=0,_=function(e){r.log("end ",e),l?l(e):o=e},f=function(){if(r.log("do_possible ",s),s++,r.log(s,t.length),s>t.length)return void _(FieldVal.create_error(e.errors.no_valid_option,n));var o=t[s-1];FieldVal.use_checks(i,o,{field_name:null,validator:null,emit:u},function(e){r.log("response ",e),void 0===e?(r.log("success"),_(void 0)):f()}),r.log("end of do_possible")};return f(),r.log("RETURNING ",o),o};return n?(n.check=i,n):{check:i}},email:function(r){var t=function(t){var n=e.email_regex;return n.test(t)?void 0:FieldVal.create_error(e.errors.invalid_email,r)};return r?(r.check=t,r):{check:t}},url:function(r){var t=function(t){var n=e.url_regex;return n.test(t)?void 0:FieldVal.create_error(e.errors.invalid_url,r)};return r?(r.check=t,r):{check:t}}};return e.email_regex=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,e.url_regex=/^(https?):\/\/(((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))|((([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])))(:[1-9][0-9]+)?(\/)?([\/?].+)?$/,e}.call();"undefined"!=typeof module&&(module.exports=BasicVal);