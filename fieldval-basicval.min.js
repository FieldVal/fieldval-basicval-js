var BasicVal=function(){var r;"function"==typeof require&&(r=require("tracer").console()),"function"==typeof require&&(FieldVal=require("fieldval")),Array.prototype.indexOf||(Array.prototype.indexOf=function(r,e){var n;if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),o=t.length>>>0;if(0===o)return-1;var i=+e||0;if(1/0===Math.abs(i)&&(i=0),i>=o)return-1;for(n=Math.max(i>=0?i:o-Math.abs(i),0);o>n;){if(n in t&&t[n]===r)return n;n++}return-1});var e={errors:{too_short:function(r){return{error:100,error_message:"Length is less than "+r}},too_long:function(r){return{error:101,error_message:"Length is greater than "+r}},too_small:function(r){return{error:102,error_message:"Value is less than "+r}},too_large:function(r){return{error:103,error_message:"Value is greater than "+r}},not_in_list:function(){return{error:104,error_message:"Value is not a valid choice"}},cannot_be_empty:function(){return{error:105,error_message:"Value cannot be empty."}},no_prefix:function(r){return{error:106,error_message:"Value does not have prefix: "+r}},invalid_email:function(){return{error:107,error_message:"Invalid email address format."}},invalid_url:function(){return{error:108,error_message:"Invalid url format."}},incorrect_length:function(r){return{error:109,error_message:"Length is not equal to "+r}},no_suffix:function(r){return{error:110,error_message:"Value does not have suffix: "+r}},not_equal:function(r){return{error:113,error_message:"Not equal to "+r+"."}},no_valid_option:function(){return{error:115,error_message:"None of the options were valid."}},contains_whitespace:function(){return{error:116,error_message:"Contains whitespace."}},must_start_with_letter:function(){return{error:117,error_message:"Must start with a letter."}},value_in_list:function(){return{error:104,error_message:"Value not allowed"}}},equal_to:function(r,n){var t=function(t){return t!==r?FieldVal.create_error(e.errors.not_equal,n,r):void 0};return n?(n.check=t,n):{check:t}},merge_required_and_flags:function(r,e){return"object"==typeof r?e=r:(e||(e={}),e.required=r),e},integer:function(r,n){return FieldVal.type("integer",e.merge_required_and_flags(r,n))},number:function(r,n){return FieldVal.type("number",e.merge_required_and_flags(r,n))},array:function(r,n){return FieldVal.type("array",e.merge_required_and_flags(r,n))},object:function(r,n){return FieldVal.type("object",e.merge_required_and_flags(r,n))},"float":function(r,n){return FieldVal.type("float",e.merge_required_and_flags(r,n))},"boolean":function(r,n){return FieldVal.type("boolean",e.merge_required_and_flags(r,n))},string:function(r,n){n=e.merge_required_and_flags(r,n);var t=function(e,t){var o=FieldVal.type("string",n);"object"==typeof o&&(o=o.check);var i=o(e,t);return i?i:(n&&n.trim===!1||(e=e.trim()),0===e.length?r||void 0===r?FieldVal.REQUIRED_ERROR:FieldVal.NOT_REQUIRED_BUT_MISSING:void 0)};return n?(n.check=t,n):{check:t}},length:function(r,n){var t=function(t){return t.length!==r?FieldVal.create_error(e.errors.incorrect_length,n,r):void 0};return n?(n.check=t,n):{check:t}},min_length:function(r,n){var t=function(t){return t.length<r?FieldVal.create_error(e.errors.too_short,n,r):void 0};return n?(n.check=t,n):{check:t}},max_length:function(r,n){var t=function(t){return t.length>r?FieldVal.create_error(e.errors.too_long,n,r):void 0};return n?(n.check=t,n):{check:t}},no_whitespace:function(r){var n=function(n){return/\s/.test(n)?FieldVal.create_error(e.errors.contains_whitespace,r,max_len):void 0};return r?(r.check=n,r):{check:n}},minimum:function(r,n){var t=function(t){return r>t?FieldVal.create_error(e.errors.too_small,n,r):void 0};return n?(n.check=t,n):{check:t}},maximum:function(r,n){var t=function(t){return t>r?FieldVal.create_error(e.errors.too_large,n,r):void 0};return n?(n.check=t,n):{check:t}},range:function(r,n,t){var o=function(o){return r>o?FieldVal.create_error(e.errors.too_small,t,r):o>n?FieldVal.create_error(e.errors.too_large,t,n):void 0};return t?(t.check=o,t):{check:o}},one_of:function(r,n){var t=[];if("[object Array]"===Object.prototype.toString.call(r))for(var o=0;o<r.length;o++){var i=r[o];t.push("object"==typeof i?i[0]:i)}else for(var a in r)t.push(a);var l=function(r){return-1===t.indexOf(r)?FieldVal.create_error(e.errors.not_in_list,n):void 0};return n?(n.check=l,n):{check:l}},not_one_of:function(r,n){var t=[];if("[object Array]"===Object.prototype.toString.call(r))for(var o=0;o<r.length;o++){var i=r[o];t.push("object"==typeof i?i[0]:i)}else for(var a in r)t.push(a);var l=function(r){return-1!==t.indexOf(r)?FieldVal.create_error(e.errors.value_in_list,n):void 0};return n?(n.check=l,n):{check:l}},not_empty:function(r,n){var t=function(t){if(r){if(0===t.trim().length)return FieldVal.create_error(e.errors.cannot_be_empty,n)}else if(0===t.length)return FieldVal.create_error(e.errors.cannot_be_empty,n)};return n?(n.check=t,n):{check:t}},prefix:function(r,n){var t=function(t){return t.length>=r.length?t.substring(0,r.length)!=r?FieldVal.create_error(e.errors.no_prefix,n,r):void 0:FieldVal.create_error(e.errors.no_prefix,n,r)};return n?(n.check=t,n):{check:t}},start_with_letter:function(r){var n=function(n){if(!(n.length>0))return FieldVal.create_error(e.errors.must_start_with_letter,r);var t=n.charCodeAt(0);return t>=65&&90>=t||t>=97&&122>=t?void 0:FieldVal.create_error(e.errors.must_start_with_letter,r)};return r?(r.check=n,r):{check:n}},suffix:function(r,n){var t=function(t){return t.length>=r.length?t.substring(t.length-r.length,t.length)!=r?FieldVal.create_error(e.errors.no_suffix,n,r):void 0:FieldVal.create_error(e.errors.no_suffix,n,r)};return n?(n.check=t,n):{check:t}},each:function(r,e){var n=function(e){for(var n=new FieldVal(null),t=0;t<e.length;t++){var o=e[t],i=r(o,t);null!=i&&n.invalid(""+t,i)}var a=n.end();return null!=a?a:void 0};return e?(e.check=n,e):{check:n}},each_async:function(r,e){var n=function(r,e,n){new FieldVal(null)};return e?(e.check=n,e):{check:n}},multiple:function(r,n){r=r||[],0===r.length&&console.error("BasicVal.multiple called without possibles.");var t=function(t,o){for(var i=0;i<r.length;i++){var a,l=r[i],c=FieldVal.use_checks(t,l,null,null,function(r){a=r});if(!c)return void 0!==a&&o(a),null}return FieldVal.create_error(e.errors.no_valid_option,n)};return n?(n.check=t,n):{check:t}},multiple_async:function(n,t){if(n=n||[],0===n.length)return void console.error("BasicVal.multiple_async called without possibles.");var o,i=function(i,a,l){var c,u=function(r){c=r},s=0,_=function(){if(r.log("do_possible ",s),s++,r.log(s,n.length),s>n.length)return void l(FieldVal.create_error(e.errors.no_valid_option,t));var o=n[s-1];FieldVal.use_checks(i,o,{field_name:null,validator:null,emit:u},function(e){r.log("response ",e),void 0===e?(r.log("success"),l(void 0)):_()})};return _(),r.log("RETURNING ",o),o};return t?(t.check=i,t):{check:i}},email:function(r){var n=function(n){var t=e.email_regex;return t.test(n)?void 0:FieldVal.create_error(e.errors.invalid_email,r)};return r?(r.check=n,r):{check:n}},url:function(r){var n=function(n){var t=e.url_regex;return t.test(n)?void 0:FieldVal.create_error(e.errors.invalid_url,r)};return r?(r.check=n,r):{check:n}}};return e.email_regex=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,e.url_regex=/^(https?):\/\/(((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))|((([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])))(:[1-9][0-9]+)?(\/)?([\/?].+)?$/,e}.call();"undefined"!=typeof module&&(module.exports=BasicVal);